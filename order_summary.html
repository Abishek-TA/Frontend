<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ArrowGrub</title>
    <link rel="icon" href="./Asset/Images/ArrowGrub.png" type="Image/x-icon">
    <link rel="stylesheet" href="./Asset/css/order_summary.css">
    <link rel="stylesheet" href="./Asset/css/styles.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>        
    <script src="./Asset/js/index.js" async></script>
</head>
<body>
        <!--------------------------Header-------------------------------->
        <div id="head1"></div>
        <!--Text-->
        <center><h1>Select your Table</h1></center>
        <!--Time slot-->
        <div class="timings">
            <div class="times">
                <input type="radio" name="time" id="t1" value="09:00 AM" />
                <label for="t1" class="time">09:00 AM</label>
                <input type="radio" name="time" id="t2" value="10:00 AM" />
                <label for="t2" class="time">10:00 AM</label>
                <input type="radio" name="time" id="t3" value="11:00 AM" />
                <label for="t3" class="time">11:00 AM</label>
                <input type="radio" name="time" id="t4" value="12:00 PM" />
                <label for="t4" class="time">12:00 PM</label>
                <input type="radio" name="time" id="t5" value="13:00 PM" />
                <label for="t5" class="time">01:00 PM</label>
                <input type="radio" name="time" id="t6" value="14:00 PM" />
                <label for="t6" class="time">02:00 PM</label>
                <input type="radio" name="time" id="t7" value="15:00 AM" />
                <label for="t7" class="time">03:00 PM</label>
                <input type="radio" name="time" id="t8" value="16:00 PM" />
                <label for="t8" class="time">04:00 PM</label>
                <input type="radio" name="time" id="t9" value="17:00 PM" />
                <label for="t9" class="time">05:00 PM</label>
                <input type="radio" name="time" id="t10" value="18:00 PM" />
                <label for="t10" class="time">06:00 PM</label>
                <input type="radio" name="time" id="t11" value="19:00 PM" />
                <label for="t11" class="time">07:00 PM</label>
                <input type="radio" name="time" id="t12" value="20:00 PM" />
                <label for="t12" class="time">08:00 PM</label>
                <input type="radio" name="time" id="t13" value="21:00 PM" />
                <label for="t13" class="time">09:00 PM</label>
                <input type="radio" name="time" id="t14" value="22:00 PM" />
                <label for="t14" class="time">10:00 PM</label>
            </div>
        </div>

        <!-----------------------Table section---------------------------->
        <div class="table-container">
            <form action="./Asset/php/resvere.php" method="POST">
                <!-----------------------Table1 content------------------->
                <div class="entry_or_exit">
                    <h1 class="ent">Entrance</h1>
                </div>
                <div class="status">
                    <div class="item1">Available</div>
                    <div class="item1">Booked</div>
                    <div class="item1">Selected</div>
                  </div>
                <div class="r1">
                    <!--Row1c1-->
                    <div class="r1c1">
                        <div class="r1c1s">
                            <input
                                type="checkbox"
                                name="tickets"
                                id="r1c1s1"
                                value="t1s1"
                            />
                            <label for="r1c1s1" class="seatr1">s1</label>
                            <input
                                type="checkbox"
                                name="tickets"
                                id="r1c1s2"
                                value="t1s2"
                            />
                            <label for="r1c1s2" class="seatr1">s2</label>
                        </div>
                        <h1 class="r1table1">Table 1</h1>
                        <div class="r1c1s">
                            <input
                                type="checkbox"
                                name="tickets"
                                id="r1c1s3"
                                value="t1s3"
                            />
                            <label for="r1c1s3" class="seatr1">s3</label>
                            <input
                                type="checkbox"
                                name="tickets"
                                id="r1c1s4"
                                value="t1s4"
                            />
                            <label for="r1c1s4" class="seatr1">s4</label>
                        </div>
                    </div>
                    <!--Row1c2-->
                    <div class="r1wall"><span class="wall1">WALL</span></div>
                </div>
                <!-----------------------Table2 content------------------->
                <div class="r2">
                    <!--Table2 row1 content-->
                    <div class="r2c1">
                        <div class="r2c1s">
                            <input
                                type="checkbox"
                                name="tickets"
                                id="r2c1s1"
                                value="t2s1"
                            />
                            <label for="r2c1s1" class="seatr2">s1</label>
                            <input
                                type="checkbox"
                                name="tickets"
                                id="r2c1s2"
                                value="t2s2"
                            />
                            <label for="r2c1s2" class="seatr2">s2</label>
                        </div>
                        <h1 class="r2table1">Table 2</h1>
                        <div class="r2c1s">
                            <input
                                type="checkbox"
                                name="tickets"
                                id="r2c1s3"
                                value="t2s3"
                            />
                            <label for="r2c1s3" class="seatr2">s3</label>
                            <input
                                type="checkbox"
                                name="tickets"
                                id="r2c1s4"
                                value="t2s4"
                            />
                            <label for="r2c1s4" class="seatr2">s4</label>
                        </div>
                    </div>
                    <!--Table2 row2 content-->
                    <div class="r2c2">
                        <div class="r2c2s">
                            <input
                                type="checkbox"
                                name="tickets"
                                id="r2c2s1"
                                value="t4s1"
                            />
                            <label for="r2c2s1" class="seatr22">s1</label>
                        </div>
                        <h1 class="r2table2">Table 4</h1>
                        <div class="r2c2s">
                            <input
                                type="checkbox"
                                name="tickets"
                                id="r2c2s2"
                                value="t4s2"
                            />
                            <label for="r2c2s2" class="seatr22">s2</label>
                        </div>
                    </div>
                </div>
                <!-----------------------Table3 content------------------->
                <div class="r3">
                    <div class="r3c1">
                        <div class="r3c1s">
                            <input
                                type="checkbox"
                                name="tickets"
                                id="r3c1s1"
                                value="t3s1"
                            />
                            <label for="r3c1s1" class="seatr3">s1</label>
                            <input
                                type="checkbox"
                                name="tickets"
                                id="r3c1s2"
                                value="t3s2"
                            />
                            <label for="r3c1s2" class="seatr3">s2</label>
                        </div>
                        <h1 class="r3table1">Table 3</h1>
                        <div class="r3c1s">
                            <input
                                type="checkbox"
                                name="tickets"
                                id="r3c1s3"
                                value="t3s3"
                            />
                            <label for="r3c1s3" class="seatr3">s3</label>
                            <input
                                type="checkbox"
                                name="tickets"
                                id="r3c1s4"
                                value="t3s4"
                            />
                            <label for="r3c1s4" class="seatr3">s4</label>
                        </div>
                    </div>
                    <div class="r3c2">
                        <div class="recep">
                            <h1>RECEPTION</h1>
                        </div>
                    </div>
                </div>
                
        <div id="orderItems">
        <!-- Order items will be displayed here -->
        </div>
        <div class="price">
            <div class="total">
              <span> <span class="count">0</span> SEATS </span>
              <div class="amount">0</div>
            </div>
         </div>
            <button class="bookre1">Book Table</button>
    </form>
</div>
<br><br>
<!---------------------------Footer------------------------------->
<div class="footer"></div>

    <!-- Code to display selected items -->
<!-- <script>
document.addEventListener("DOMContentLoaded", function() {
    const urlParams = new URLSearchParams(window.location.search);
    const orderItems = document.getElementById("orderItems");
    let totalAmount = 0;

    urlParams.forEach((quantity, itemId) => {
        const itemAmount = quantity * getItemPrice(itemId);
        const itemBox = document.createElement("div");
        itemBox.classList.add("itemBox");
        const itemImg = document.createElement("img");
        itemImg.src = `./Asset/Images/${itemId}.png`;
        itemImg.alt = `${itemId}`;
        itemBox.appendChild(itemImg);
        const itemName = document.createElement("p");
        itemName.textContent = `${formatItemName(itemId)} - Quantity: ${quantity}`;
        itemBox.appendChild(itemName);
        const itemTotal = document.createElement("p");
        itemTotal.textContent = `Total: ₹${itemAmount}`;
        itemBox.appendChild(itemTotal);

        orderItems.appendChild(itemBox);
        totalAmount += itemAmount;
    });

    const totalBox = document.createElement("div");
    totalBox.classList.add("totalBox");
    totalBox.textContent = `Total Amount: ₹${totalAmount}`;/*totalamount*/
    orderItems.appendChild(totalBox);
});
function formatItemName(itemId) {
    return itemId.replace(/_/g, ' ');
}

function getItemPrice(itemId) {
    switch (itemId) {
        case "veg_burger":
            return 143;
        case "veg_pizza":
            return 143; 
        case "chicken_pizza":
            return 143; 
        case "chili_pizza":
            return 143; 
        case "veg_sandwich":
            return 143; 
        case "mushroom_pizza":
            return 143;
        case "shawarma":
            return 143;
        case "vegroll":
            return 143;
        case "chocolate_icecream":
            return 143;
        case "crab_lollipop":
            return 143;
        case "french_fries":
            return 143;
        case "chicken_lollipop":
           return 143;
        case "chettinad_chicken_gravy":
           return 143;
        case "panner_butter_masala":
            return 143;
        case "mojito":
            return 143;
        case "falooda":
            return 143; 
        default:
            return 143; 
    }
}

</script> -->
<!-- Existing JavaScript code -->
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const seats = document.querySelectorAll('input[name="tickets"]');
        const amountDisplay = document.querySelector(".amount");
        const countDisplay = document.querySelector(".count");
        let seatAmount = 0; // Updated variable name
        let selectedSeats = 0;
    
        seats.forEach(seat => {
            seat.addEventListener("change", () => {
                const basePrice = 200;
                const dynamicPrice = calculateDynamicPrice(basePrice);
                if (seat.checked) {
                    seatAmount += dynamicPrice; // Updated variable name
                    selectedSeats++;
                } else {
                    seatAmount -= dynamicPrice; // Updated variable name
                    selectedSeats--;
                }
                amountDisplay.textContent = seatAmount.toFixed(2); // Updated variable name
                countDisplay.textContent = selectedSeats;
    
                // Calculate final amount
                const finalAmount = calculateFinalAmount(seatAmount);
                console.log('Final Amount:', finalAmount); // You can remove this line after testing
            });
        });
    
        // Function to calculate dynamic price based on time
        function calculateDynamicPrice(basePrice) {
            const selectedTimeInput = document.querySelector('input[name="time"]:checked');
            if (!selectedTimeInput) {
                // Handle case where no time is selected
                return basePrice;
            }
            const selectedTime = selectedTimeInput.value;
            const selectedHours = parseInt(selectedTime.split(':')[0]);
    
            if (selectedHours >= 18 && selectedHours < 20) {
                return basePrice * 1.2;
            } else {
                return basePrice;
            }
        }
    
        // Function to calculate final amount
        function calculateFinalAmount(seatAmount) {
            const totalAmount = parseFloat(amountDisplay.textContent); // Get total amount from display
            return totalAmount + seatAmount;
        }
    });
    </script>
    
    <!-- <script>
document.addEventListener("DOMContentLoaded", function() {
    const seats = document.querySelectorAll('input[name="tickets"]');
    const amountDisplay = document.querySelector(".amount");
    const countDisplay = document.querySelector(".count");
    let seatAmount = 0; // Updated variable name
    let selectedSeats = 0;

    seats.forEach(seat => {
        seat.addEventListener("change", () => {
            const basePrice = 200;
            const dynamicPrice = calculateDynamicPrice(basePrice);
            if (seat.checked) {
                seatAmount += dynamicPrice; // Updated variable name
                selectedSeats++;
            } else {
                seatAmount -= dynamicPrice; // Updated variable name
                selectedSeats--;
            }
            amountDisplay.textContent = seatAmount.toFixed(2); // Updated variable name
            countDisplay.textContent = selectedSeats;
        });
    });
});

function calculateDynamicPrice(basePrice) {
    const selectedTimeInput = document.querySelector('input[name="time"]:checked');
    if (!selectedTimeInput) {
        // Handle case where no time is selected
        return basePrice;
    }
    const selectedTime = selectedTimeInput.value;
    const selectedHours = parseInt(selectedTime.split(':')[0]);

    if (selectedHours >= 18 && selectedHours < 20) {
        return basePrice * 1.2;
    } else {
        return basePrice;
    }
}

</script> -->
<!-- <script>
document.addEventListener("DOMContentLoaded", function() {
    const seats = document.querySelectorAll('input[name="tickets"]');
    const amountDisplay = document.querySelector(".amount");
    const countDisplay = document.querySelector(".count");
    let totalAmount = 0;
    let selectedSeats = 0;

    seats.forEach(seat => {
        seat.addEventListener("change", () => {
            const basePrice = 200;
            const dynamicPrice = calculateDynamicPrice(basePrice);
            if (seat.checked) {
                totalAmount += dynamicPrice; 
                selectedSeats++;
            } else {
                totalAmount -= dynamicPrice;
                selectedSeats--;
            }
            amountDisplay.textContent = totalAmount.toFixed(2); 
            countDisplay.textContent = selectedSeats;
        });
    });
}); -->

<!-- function calculateDynamicPrice(basePrice) {
    const selectedTimeInput = document.querySelector('input[name="time"]:checked');
    if (!selectedTimeInput) {
        // Handle case where no time is selected
        return basePrice;
    }
    const selectedTime = selectedTimeInput.value;
    const selectedHours = parseInt(selectedTime.split(':')[0]);

    if (selectedHours >= 18 && selectedHours < 20) {
        return basePrice * 1.2;
    } else {
        return basePrice;
    }
}
</script> -->
<!-- <script>
document.addEventListener("DOMContentLoaded", function() {
    const seats = document.querySelectorAll('input[name="tickets"]');
    const amountDisplay = document.querySelector(".amount");
    const countDisplay = document.querySelector(".count");
    let totalAmount = 0;
    let selectedSeats = 0;

    seats.forEach(seat => {
        seat.addEventListener("change", () => {
            if (seat.checked) {
                totalAmount += calculateDynamicPrice(200); 
                selectedSeats++;
            } else {
                totalAmount -= calculateDynamicPrice(200);
                selectedSeats--;
            }
            amountDisplay.textContent = (totalAmount + calculateDynamicPrice(200)).toFixed(2); 
            countDisplay.textContent = selectedSeats;
        });
    });
});

function calculateDynamicPrice(basePrice) {
    const selectedTime = document.querySelector('input[name="time"]:checked').value;
    const selectedHours = parseInt(selectedTime.split(':')[0]);

    if (selectedHours >= 18 && selectedHours < 20) {
      
        return basePrice * 1.2;
    } else {
        return basePrice;
    }
}
</script> -->
<div class="footer"></div>
</body>

</html>
